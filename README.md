# üß† Task 3 ‚Äî –ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Django API –∏ Telegram-–±–æ—Ç–∞

## üìã –û–ø–∏—Å–∞–Ω–∏–µ

–í —ç—Ç–æ–º –∑–∞–¥–∞–Ω–∏–∏ —Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è —Ñ–∏–Ω–∞–ª—å–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –º–µ–∂–¥—É Django REST API –∏ Telegram-–±–æ—Ç–æ–º:  
–±–æ—Ç –ø–æ–ª—É—á–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ –ø–æ –∫–æ–º–∞–Ω–¥–µ ```/myinfo``` —á–µ—Ä–µ–∑ GET-–∑–∞–ø—Ä–æ—Å.  
–¢–∞–∫–∂–µ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è CORS –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–π —Ä–∞–±–æ—Ç—ã API.

---

## üöÄ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

- GET-—ç–Ω–¥–ø–æ–∏–Ω—Ç ```api/myinfo```:
  - –ü—Ä–∏–Ω–∏–º–∞–µ—Ç ```user_id``` —á–µ—Ä–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞
  - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç JSON-–¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –µ—Å–ª–∏ –æ–Ω –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω
  - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—à–∏–±–∫—É, –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω
- –ë–æ—Ç-–∫–æ–º–∞–Ω–¥–∞ ```/myinfo```:
  - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å –∫ API
  - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç ID –∏ username –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ CORS –¥–ª—è –≤–Ω–µ—à–Ω–µ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ API

---

## üõ†Ô∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### 1. –ü–µ—Ä–µ–∫–ª—é—á–∏—Å—å –Ω–∞ –≤–µ—Ç–∫—É
```bash
git checkout task-3-full-integration
```

---

### 2. –£—Å—Ç–∞–Ω–æ–≤–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```bash
pip install django djangorestframework pyTelegramBotAPI python-dotenv django-cors-headers
```

---

### 3. –ù–∞—Å—Ç—Ä–æ–π CORS –≤ ```settings.py```

#### –î–æ–±–∞–≤—å –≤ ```INSTALLED_APPS```:
```python
INSTALLED_APPS += [
    'corsheaders',
]
```

#### –î–æ–±–∞–≤—å –≤ –Ω–∞—á–∞–ª–æ ```MIDDLEWARE```:
```python
MIDDLEWARE = [
    'corsheaders.middleware.CorsMiddleware',
    # –æ—Å—Ç–∞–ª—å–Ω—ã–µ middlewares...
]
```

#### –î–æ–±–∞–≤—å –≤ –∫–æ–Ω–µ—Ü ```settings.py```:
```python
CORS_ALLOW_ALL_ORIGINS = True  # –¢–æ–ª—å–∫–æ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
```

---

## üß¨ API: GET ```api/myinfo```

### –ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:
```
GET http://127.0.0.1:8000/api/myinfo/?user_id=123456
```

### –ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞:
```json
{
  "user_id": 123456,
  "username": "cooluser",
  "created_at": "2025-05-07T10:00:00Z"
}
```

–ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω:
```json
{
  "error": "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω"
}
```

---

## ü§ñ –ö–æ–º–∞–Ω–¥–∞ ```/myinfo``` –≤ –±–æ—Ç–µ

–í —Ñ–∞–π–ª–µ ```tg_bot.py``` —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∫–æ–º–∞–Ω–¥–∞:
```python
@bot.message_handler(commands=['myinfo'])
def handle_myinfo(message):
    user_id = message.from_user.id
    response = requests.get(API_URL.replace("register", "myinfo"), params={
        "user_id": user_id
    })

    if response.status_code == 200:
        data = response.json()
        bot.send_message(message.chat.id, f"üë§ –í–∞—à–∏ –¥–∞–Ω–Ω—ã–µ:\nID: {data['user_id']}\nUsername: {data.get('username')}")
    else:
        bot.send_message(message.chat.id, "‚ùå –í—ã –Ω–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã.")
```

---

## üîê –¢–æ–∫–µ–Ω Telegram-–±–æ—Ç–∞

–•—Ä–∞–Ω–∏—Ç—Å—è –≤ —Ñ–∞–π–ª–µ ```.env```:
```
TELEGRAM_BOT_TOKEN=your_real_bot_token
```

–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —á–µ—Ä–µ–∑ ```dotenv```:
```python
from dotenv import load_dotenv
load_dotenv()
BOT_TOKEN = os.getenv('TELEGRAM_BOT_TOKEN')
```

–§–∞–π–ª ```.env``` –¥–æ–±–∞–≤–ª–µ–Ω –≤ ```.gitignore```

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
```
.
‚îú‚îÄ‚îÄ /.env/                  # –°–µ–∫—Ä–µ—Ç—ã
‚îú‚îÄ‚îÄ /tg_bot.py/             # Telegram-–±–æ—Ç
‚îú‚îÄ‚îÄ /bot/
‚îÇ   ‚îú‚îÄ‚îÄ models.py
‚îÇ   ‚îú‚îÄ‚îÄ serializers.py
‚îÇ   ‚îú‚îÄ‚îÄ views.py
‚îú‚îÄ‚îÄ /djangobot/
‚îÇ   ‚îú‚îÄ‚îÄ settings.py
‚îÇ   ‚îú‚îÄ‚îÄ urls.py
‚îî‚îÄ‚îÄ manage.py
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∫–æ–º–∞–Ω–¥–æ–π /start
2. –û—Ç–ø—Ä–∞–≤—å –±–æ—Ç—É /myinfo ‚Äî –ø–æ–ª—É—á–∏—à—å –¥–∞–Ω–Ω—ã–µ
3. –£–¥–∞–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ –±–∞–∑—ã ‚Äî –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–∫–∏
4. –ü—Ä–æ–≤–µ—Ä—å CORS —á–µ—Ä–µ–∑ –≤–Ω–µ—à–Ω–∏–µ –∑–∞–ø—Ä–æ—Å—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, frontend)

---

## üìú –ê–≤—Ç–æ—Ä

RoKols2017@gmail.com
